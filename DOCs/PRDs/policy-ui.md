Product Requirements Document: Policy Management UI (ABAC)
A Next.js page for creating, listing, and updating access-control policies using shared FormRenderer and a MongoDB-backed repository.

### Functional Requirements

| Requirement ID | Description | User Story | Expected Behavior/Outcome |
| -------------- | ----------- | ---------- | ------------------------- |
| REQ-FN-001 | Implement a Policies page component in [page.tsx](../../apps/website/src/app/[locale]/(private)/admin/page.tsx) showing a list and a “New Policy” entry point. | As an admin, I want a single page to manage policies so that I can work efficiently. | Page renders without errors; list visible; “New Policy” control present. |
| REQ-FN-002 | Use FormRenderer from @visionarai-one/ui to render the policy Create/Edit form from policy schema metadata. | As an admin, I want consistent forms so that I get validation and accessibility by default. | Form fields auto-render from schema; client-side validation activates; ARIA semantics intact. |
| REQ-FN-003 | Integrate createPolicyRepository using the MongoDB connector from packages/connectors; reuse a single connection instance. | As a developer, I want a clean repository setup so that data access is reliable. | Repository initializes once; health check passes; no duplicate connections during navigation. |
| REQ-FN-004 | List policies from the repository with pagination (page size 10), sort by updatedAt desc, and search by name or ID. | As an admin, I want to find policies quickly so that I can edit the right one. | Typing a query filters results; pagination works; sort order stable; API returns within acceptable latency. |
| REQ-FN-005 | Create Policy: Submit the form to persist a new policy document. | As an admin, I want to create policies so that I can define access rules. | Valid submit calls repository.createPolicy; success shows toast and refreshes list; invalid shows field errors; no duplicate ID allowed. |
| REQ-FN-006 | Update Policy: Implement repository.updatePolicy(id, patch) and wire UI to edit and save changes. | As an admin, I want to update policies so that I can refine rules over time. | updatePolicy validates input, persists changes, returns saved doc; UI shows success toast and updates list row; optimistic state rolls back on error. |
| REQ-FN-007 | Condition Builder: Provide + buttons to add/remove condition groups and conditions within groups. | As an admin, I want to build conditions visually so that complex rules are easy to author. | Users can add/delete groups and conditions; state reflects changes; no orphan/empty invalid states on submit. |
| REQ-FN-008 | Operator handling: Allow AND/OR selection at group level and for combining groups; serialize to policy schema correctly. | As an admin, I want precise logical control so that evaluation matches intent. | Selected operators persist; serialization matches schema; evaluator consumes without errors; preview reflects logic. |
| REQ-FN-009 | Enforce allowed resource types via repository/master data guardrails in the form (select options only from allowed set). | As an admin, I want safe choices so that policies remain valid. | Resource type select shows only allowed values; submit blocks on disallowed values with clear error. |
| REQ-FN-010 | Validate using policy Zod schema (domains/access-control/policy.zod.ts) on submit; show inline errors per field. | As a user, I want clear feedback so that I can fix issues quickly. | Client-side schema validation runs; errors shown next to fields; no network call on invalid data. |
| REQ-FN-011 | Localize all strings with next-intl; provide message keys for labels, toasts, and validation messages. | As a global user, I want localized UI so that I can use my language. | UI text comes from messages/*; locale switch updates labels; no hardcoded strings. |
| REQ-FN-012 | Accessibility: All controls (add/remove, operator toggles, selects) are keyboard navigable and labeled. | As an assistive tech user, I want accessible controls so that I can manage policies. | Tab order correct; buttons have aria-labels; form fields have labels; meets WCAG AA for interactions. |